<html>
    <head>
        <link rel="stylesheet" href="dashboard.css" />
        <link href="https://fonts.googleapis.com/css2?family=Nunito&display=swap" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css2?family=Montserrat&display=swap" rel="stylesheet">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <script>
            $(document).ready(function() {
                const DATES_DATA = [
                    [],
                    [],
                    [],
                    [],
                    ['13727', '13696', '13724', '13718', '13917', '13922', 'meme'],
                    ['10011', '10012'],
                    []
                ]

                const days = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];
                const months = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];

                const CLASS_DATA = {
                    '13727': {
                        subj: 'MAAE',
                        code: '2700',
                        section: 'C',
                        type: 'Lecture',
                        startT: '8:35 AM',
                        endT: '9:55 AM',
                        link: 'https://culearn.carleton.ca/moodle/course/view.php?id=163048'
                    },
                    '13696': {
                        subj: 'MAAE',
                        code: '2101',
                        section: 'C',
                        type: 'Lecture',
                        startT: '10:05 AM',
                        endT: '11:25 AM',
                        link: 'https://culearn.carleton.ca/moodle/course/view.php?id=163017'
                    },
                    '13724': {
                        subj: 'MAAE',
                        code: '2400',
                        section: 'L6',
                        type: 'Lab',
                        startT: '11:35 AM',
                        endT: '2:25 PM',
                        link: ''
                    },
                    '13718': {
                        subj: 'MAAE',
                        code: '2400',
                        section: 'F',
                        type: 'Lecture',
                        startT: '4:05 PM',
                        endT: '5:25 PM',
                        link: ''
                    },
                    '13917': {
                        subj: 'MATH',
                        code: '2004',
                        section: 'C',
                        type: 'Lecture',
                        startT: '6:05 PM',
                        endT: '7:25 PM',
                        link: ''
                    },
                    '13922': {
                        subj: 'MATH',
                        code: '2004',
                        section: 'CT',
                        type: 'Tutorial',
                        startT: '7:35 PM',
                        endT: '8:25 PM',
                        link: ''
                    },
                    'meme': {
                        subj: 'MEME',
                        code: '42069',
                        section: 'E',
                        type: 'LORD',
                        startT: '8:35 PM',
                        endT: '9:55 PM',
                        link: ''
                    },
                    '10011': {
                        subj: 'AERO',
                        code: '2001',
                        section: 'C',
                        type: 'Lecture',
                        startT: '8:35 AM',
                        endT: '9:25 AM',
                        link: ''
                    },
                    '10012': {
                        subj: 'AERO',
                        code: '2001',
                        section: 'L1',
                        type: 'Tutorial',
                        startT: '11:35 AM',
                        endT: '1:25 PM',
                        link: ''
                    }
                }

                let now = new Date();
                let today = new Date(now.getFullYear(), now.getMonth(), now.getDate());
                let day = new Date(now.getFullYear(), now.getMonth(), now.getDate());

                $('body').on('click', '#next-day', function() {
                    day.setDate(day.getDate() + 1);
                    refreshDash();
                });

                $('body').on('click', '#prev-day', function() {
                    day.setDate(day.getDate() - 1);
                    refreshDash();
                });

                function refreshDash() {
                    const DATE = day.getDate();
                    const DAY = day.getDay()
                    $('#dash-title').html((day.getTime() === today.getTime() ? ("Today's Panel - " + days[DAY]) : days[DAY]) + ", " + months[day.getMonth()] + " " + DATE + "<sup>" + (DATE === 1 ? "st" : DATE === 2 ? "nd" : DATE === 3 ? "rd" : "th") + "</sup></div>");
                    loadSchedule();
                }

                function loadSchedule() {
                    $('#schedule').html('');
                    DATES_DATA[day.getDay()].forEach(crn => {
                        let CLASS = CLASS_DATA[crn];
                        $('#schedule').append(`
                            <div class="class">
                                <div class="data">
                                    <div class="title bold">` + CLASS.subj + ` ` + CLASS.code + ` - ` + CLASS.type + `</div>
                                    <div>` + (day.getTime() === today.getTime() ? 'Today' : days[day.getDay()]) + ` @ ` + CLASS.startT + ` - ` + CLASS.endT + ` EST</div>
                                </div>
                                <div></div>
                            </div>`);
                    });
                }

                refreshDash();

                $('main.dash').fadeIn(1000);
                $('main.dash').css('display', 'grid');

            });


            function transitionHandler(location) {

            }
        </script>
    </head>
    <body>
        <div id="page">
            <header>
                cuLearn++
                <div>
                    <svg id="revert" class="header-icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" width="533.333px" height="533.333px" viewBox="0 0 533.333 533.333" style="enable-background:new 0 0 533.333 533.333;" xml:space="preserve"><g>	<path d="M416.667,333.333v-66.666H250V200h166.667v-66.667l100,100L416.667,333.333z M383.333,300v133.333H216.667v100l-200-100V0   h366.667v166.667H350V33.333H83.333L216.667,100v300H350V300H383.333z"/></g></svg>
                </div>
            </header>
            <main class="dash">
                <section class="header">
                    <div id="dash-title">Today's Panel - Thursday, January 1<sup>st</sup></div>
                    <div>
                        <svg version="1.1" id="prev-day" class="chevron" x="0px" y="0px" fill="#000000" viewBox="0 0 407.436 407.436"><polygon points="315.869,21.178 294.621,0 91.566,203.718 294.621,407.436 315.869,386.258 133.924,203.718 "/><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g></svg>
                        <svg version="1.1" id="next-day" class="chevron" x="0px" y="0px" fill="#000000" viewBox="0 0 407.436 407.436"><polygon points="112.814,0 91.566,21.178 273.512,203.718 91.566,386.258 112.814,407.436 315.869,203.718 "/><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g></svg>
                    </div>
                </section>
                <section id="dash-content" class="content_wrapper">
                    <section id="dash-content-left" class="content">
                        <div class="panel">
                            <div class="header red-bg">Schedule</div>
                            <div id="schedule" class="schedule">

                            </div>
                        </div>
                        <div class="panel">
                            <div class="header red-bg">Checklist</div>
                        </div>
                    </section>
                    <section id="dash-content-right" class="content">
                        <div class="panel">
                            <div class="header black-bg">Upcoming Deadlines & Events</div>
                        </div>
                    </section>
                </section>
            </main>
        </div>
    </body>
</html>